{% extends "base.html" %}
{% block title %}Create User - Summer Competition 2025{% endblock %}
{% block content %}
<div class="container">
    <div class="page-header">
        <h1>Create New User</h1>
    </div>

    <div class="breadcrumb">
        <a href="{{ url_for('admin.manage_users') }}">Manage Users</a>
        <span class="breadcrumb-separator">â€º</span>
        <span>Create User</span>
    </div>

    <form method="POST" class="form-group">
        {{ form.hidden_tag() }}
        
        <div class="form-group">
            {{ form.first_name.label(class="form-label") }}
            {{ form.first_name(class="form-control", placeholder="Enter first name") }}
            {% for error in form.first_name.errors %}
                <span class="error-message">{{ error }}</span>
            {% endfor %}
        </div>
        
        <div class="form-group">
            {{ form.last_name.label(class="form-label") }}
            {{ form.last_name(class="form-control", placeholder="Enter last name") }}
            {% for error in form.last_name.errors %}
                <span class="error-message">{{ error }}</span>
            {% endfor %}
        </div>
        
        <div class="form-group">
            {{ form.email.label(class="form-label") }}
            {{ form.email(class="form-control", placeholder="Enter email address") }}
            {% for error in form.email.errors %}
                <span class="error-message">{{ error }}</span>
            {% endfor %}
        </div>
        
        <div class="form-group">
            {{ form.password.label(class="form-label") }}
            {{ form.password(class="form-control", placeholder="Enter secure password") }}
            {% for error in form.password.errors %}
                <span class="error-message">{{ error }}</span>
            {% endfor %}
        </div>
        
        <div class="checkbox-container">
            {{ form.is_admin }}
            {{ form.is_admin.label }}
            {% for error in form.is_admin.errors %}
                <span class="error-message">{{ error }}</span>
            {% endfor %}
        </div>
        
        <div class="checkbox-container">
            {{ form.is_competition_participant(id="is_competition_participant") }}
            {{ form.is_competition_participant.label }}
            {% for error in form.is_competition_participant.errors %}
                <span class="error-message">{{ error }}</span>
            {% endfor %}
        </div>
        
        <div class="form-group">
            {{ form.year.label(class="form-label") }}
            {{ form.year(class="form-control") }}
            {% for error in form.year.errors %}
                <span class="error-message">{{ error }}</span>
            {% endfor %}
        </div>
        
        <div class="form-group school-field">
            {{ form.school_id.label(class="form-label") }}
            {{ form.school_id(id="school_id", class="form-control") }}
            {% for error in form.school_id.errors %}
                <span class="error-message">{{ error }}</span>
            {% endfor %}
        </div>
        
        <div class="form-group maths-class-field">
            {{ form.maths_class.label(class="form-label") }}
            {{ form.maths_class(class="form-control", placeholder="e.g., 10M1, 11A, etc.") }}
            {% for error in form.maths_class.errors %}
                <span class="error-message">{{ error }}</span>
            {% endfor %}
        </div>
        
        <div>
            <input type="submit" value="Create User" class="button">
        </div>
    </form>
    
    <a href="{{ url_for('admin.manage_users') }}" class="button">Back to Manage Users</a>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const competitionCheckbox = document.getElementById('is_competition_participant');
    const schoolField = document.querySelector('.school-field');
    const mathsClassField = document.querySelector('.maths-class-field');
    
    function toggleFields() {
        if (competitionCheckbox.checked) {
            schoolField.style.display = 'block';
            mathsClassField.style.display = 'none';
        } else {
            schoolField.style.display = 'none';
            mathsClassField.style.display = 'block';
        }
    }
    
    toggleFields();
    competitionCheckbox.addEventListener('change', toggleFields);
});
</script>
{% endblock %}